{{- if not (and .Values.recommendations .Values.recommendations.ignoreHealthChecks .Values.recommendations.ignoreHealthChecks.disabled) }}
apiVersion: odigos.io/v1alpha1
kind: Action
metadata:
  name: ignore-health-checks
  namespace: {{ .Values.odigosNamespace }}
  labels:
    odigos.io/recommendation: "ignore-health-checks"
spec:
  actionName: "ignore health checks for traces"
  notes: "this is automatically generated action by odigos recommendations system. it is used to instruct odigos not to collect health check traces where supported."
  signals:
    - TRACES
  samplers:
    ignoreHealthChecks:
      fractionToRecord: {{ (.Values.recommendations.ignoreHealthChecks | default dict).fractionToRecord | default 0 }}
{{- end }}
