---
title: "Service Name Sampler"
description: "This action is an [Endpoint Action](/pipeline/actions/introduction#scope-categories) that samples traces based on the presence of specified services within a trace."
sidebarTitle: "Service Name Sampler"
icon: "tag"
---

import BetaWarning from '/snippets/beta-warning.mdx';
import AssumeNoMeaning from '/snippets/assume-no-meaning.mdx';

<BetaWarning />

## Considerations

<Warning>
  Before enabling **service name sampler**, please note the following:
  - Supports only traces.
  - All spans in a trace will be either entirely dropped or entirely sampled.
  - Adding this action causes a 30-second delay in sending the data.
  - Traces with durations exceeding 30 seconds might not be sampled correctly.
</Warning>

## Use Cases

**Focused Monitoring**

- Collect traces only if specific critical services appear in a trace. This helps in pinpointing issues related to particular microservices.

**Cost Control**

- Reducing the number of collected traces based on essential services optimizes storage and analysis costs.

## Configuration Options

<AccordionGroup>
  <Accordion title="actionName">
    **actionName** `string` : Allows you to attach a meaningful name to the action for convenience.
    - This field is *optional*
    - <AssumeNoMeaning />
  </Accordion>
  <Accordion title="notes">
    **notes** `string` : Allows you to attach notes regarding the action for convenience.
    - This field is *optional*
    - <AssumeNoMeaning />
  </Accordion>
  <Accordion title="disabled">
    **disabled** `boolean` : Allows you to temporarily disable the action, but keep it saved for future use.
    - This field is *optional*, defaults to `false`
  </Accordion>
  <Accordion title="signals *">
    **signals** `string[]` : An array with the signals that the processor will act on.
    - This field is *required*
    - Supported values: `TRACES`
  </Accordion>
  <Accordion title="service_names *">
    **service_names** `string[]` : An array of service names. Only traces containing at least one listed service will be retained.
    - This field is *required*
  </Accordion>
  <Accordion title="fallback_sampling_ratio *">
    **fallback_sampling_ratio** `number` : Percentage of traces that do NOT match the listed services but will still be retained. Setting this to 10 ensures that 10% of traces not matching your listed services are retained for reference.
    - This field is *required*
  </Accordion>
</AccordionGroup>

<Info>
  This sampler retains any trace containing one or more of the specified service names. Traces without these services are discarded, except for the portion specified by the fallback ratio.
</Info>

## Basic Example

The following example demonstrates how to retain all traces containing either the `payment-service` or `auth-service`. Additionally, it retains 15% of traces that do not contain these services.

<Steps>
  <Step>
    Create a YAML file with the following content:

    ```yaml service-name-sampler.yaml
    apiVersion: actions.odigos.io/v1alpha1
    kind: ServiceNameSampler
    metadata:
      name: example-servicenamesampler
      namespace: odigos-system
    spec:
      actionName: "example-servicenamesampler-action"
      service_names:
      - "payment-service"
      - "auth-service"
      fallback_sampling_ratio: 15
      signals:
      - TRACES
    ```
  </Step>
  <Step>
    Apply the action to the cluster:

    ```bash
    kubectl apply -f service-name-sampler.yaml
    ```
  </Step>
</Steps>
