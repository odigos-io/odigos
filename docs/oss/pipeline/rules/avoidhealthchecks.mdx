---
title: "IgnoreHealthChecks"
description: "The \"IgnoreHealthChecks\" rule can be used to control the sampling of health check traces. Health checks are typically high-frequency, low-value traces that can clutter your trace data and increase costs."
sidebarTitle: "IgnoreHealthChecks"
icon: "heart-pulse"
---

## Considerations

<Warning>
  Before configuring **IgnoreHealthChecks**, please note the following:
  - Health checks are typically high-frequency operations that can generate a large volume of traces
  - Recording all health check traces can significantly increase the cost of processing, storing and analyzing traces
  - Health check traces usually don't provide valuable debugging or monitoring insights
</Warning>

## Configuration Options

<AccordionGroup>
  <Accordion title="fractionToRecord">
    **fractionToRecord** `float` : Controls what fraction of health check traces should be recorded. This allows you to sample health checks rather than completely filtering them out.
    - This field is *optional*, and defaults to `0`
    - Valid range: `0` to `1` (inclusive)
    - `0` means no health check traces will be recorded (recommended for most cases)
    - `1` means all health check traces will be recorded
    - Values between `0` and `1` will sample that fraction of health check traces (e.g., `0.1` records 10% of health checks)
  </Accordion>
</AccordionGroup>

<Note>
  If `fractionToRecord` is not specified, it defaults to `0`, meaning no health check traces will be recorded.
</Note>

## Basic Example

The following example demonstrates how to completely avoid recording health check traces for all sources in the cluster where the agent supports head sampling.

<Steps>
  <Step>
    Create a YAML file with the following content:

    ```yaml avoid-health-checks.yaml
    apiVersion: odigos.io/v1alpha1
    kind: InstrumentationRule
    metadata:
      name: avoid-health-checks
      namespace: odigos-system
    spec:
      ruleName: "ignore health check traces"
      avoidHealthChecks:
        fractionToRecord: 0
    ```
  </Step>
  <Step>
    Apply the rule to the cluster:

    ```shell
    kubectl apply -f avoid-health-checks.yaml
    ```
  </Step>
</Steps>

## Notes

- Odigos discovers the health check paths to use for head sampling based on the "livenessProbe" and "readinessProbe" declared in your workload specifications. For health checks to be correctly identified and ignored, they must be explicitly defined in the workload spec.
- This feature is currectly supported in agents: `nodejs-community` and `nodejs-enterprise`.
