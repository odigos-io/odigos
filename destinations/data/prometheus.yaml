apiVersion: internal.odigos.io/v1beta1
kind: Destination
metadata:
  type: prometheus
  displayName: Prometheus
  category: self hosted
spec:
  image: prometheus.svg
  signals:
    traces:
      supported: false
    metrics:
      supported: true
      spanMetricsEnabledByDefault: true
    logs:
      supported: false
  fields:
    - name: PROMETHEUS_REMOTEWRITE_URL
      displayName: Remote Write URL
      componentType: input
      componentProps:
        type: text
        required: true
    - name: PROMETHEUS_RESOURCE_ATTRIBUTES_LABELS
      displayName: Resource Attributes Labels
      componentType: multiInput
      componentProps:
        tooltip: 'use these OpenTelemetry resource attributes as prometheus labels for each metric data point'
      initialValue: '["k8s.container.name", "k8s.pod.name", "k8s.namespace.name"]'
    - name: PROMETHEUS_BEARER_TOKEN
      displayName: Bearer Token
      componentType: input
      secret: true
      componentProps:
        type: password
        required: false
        tooltip: 'use this bearer token if your prometheus remote write endpoint requires authentication'
        placeholder: 'your-bearer-token'
