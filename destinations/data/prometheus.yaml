apiVersion: internal.odigos.io/v1beta1
kind: Destination
metadata:
  type: prometheus
  displayName: Prometheus
  category: self hosted
spec:
  image: prometheus.svg
  signals:
    traces:
      supported: false
    metrics:
      supported: true
      spanMetricsEnabledByDefault: true
    logs:
      supported: false
  fields:
    - name: PROMETHEUS_REMOTEWRITE_URL
      displayName: Remote Write URL
      componentType: input
      componentProps:
        type: text
        required: true
    - name: PROMETHEUS_RESOURCE_ATTRIBUTES_LABELS # Notice: deprecated. not used anymore. will be removed soon.
      displayName: Resource Attributes Labels (Deprecated)
      componentType: multiInput
      componentProps:
        tooltip: 'deprecated. will be removed soon.'
      # initialValue: '["k8s.container.name", "k8s.pod.name", "k8s.namespace.name"]'
    - name: PROMETHEUS_BEARER_TOKEN
      displayName: Bearer Token
      componentType: input
      secret: true
      componentProps:
        type: password
        required: false
        tooltip: 'use this bearer token if your prometheus remote write endpoint requires authentication'
        placeholder: 'your-bearer-token'
    - name: PROMETHEUS_BASIC_AUTH_USERNAME
      displayName: Basic Auth Username
      componentType: input
      componentProps:
        type: text
        required: false
        tooltip: 'username for basic authentication (if your prometheus remote write endpoint requires basic auth)'
        placeholder: 'username'
    - name: PROMETHEUS_BASIC_AUTH_PASSWORD
      displayName: Basic Auth Password
      componentType: input
      secret: true
      componentProps:
        type: password
        required: false
        tooltip: 'password for basic authentication (if your prometheus remote write endpoint requires basic auth)'
        placeholder: 'password'
