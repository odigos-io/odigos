apiVersion: internal.odigos.io/v1beta1
kind: Destination
metadata:
  type: hyperdx
  displayName: HyperDX
  category: managed
spec:
  image: hyperdx.svg
  signals:
    traces:
      supported: true
    metrics:
      supported: true
    logs:
      supported: true
  fields:
    - name: HYPERDX_API_KEY
      displayName: HyperDX API Key
      componentType: input
      secret: true
      componentProps:
        type: password
        required: true

    - name: HYPERDX_LOG_NORMALIZER
      displayName: Enable Log Normalizer
      componentType: checkbox
      componentProps:
        required: false
        tooltip: "Enable HyperDX log normalization processor. This parses JSON from log bodies, infers severity levels, and normalizes log attributes for better querying."
      initialValue: true
      renderCondition: ["SIGNALS", "INCLUDES", "logs"]
      hideFromReadData: ["HYPERDX_LOG_NORMALIZER", "==", "false"]
      customReadDataLabels:
        - condition: 'true'
          title: 'Log Normalizer'
          value: 'Enabled'
  note:
    type: Check
    content: |
      We handle the endpoint internally, so you don't need to provide it.
      - The endpoint is `in-otel.hyperdx.io:4317`
