apiVersion: e2e.tests.odigos.io/v1
kind: TraceTest
description: This test waits for a trace that goes from frontend to pricing, inventory, coupon, and membership services
query: |
  length([?span.serviceName == 'frontend']) >= `2` &&
  length([?span.serviceName == 'pricing']) >= `1` &&
  length([?span.serviceName == 'inventory']) >= `1` &&
  length([?span.serviceName == 'coupon']) >= `1` &&
  length([?span.serviceName == 'membership']) >= `1` &&
  length([?span.serviceName == 'currency']) >= `1`
expected:
  count: 1
