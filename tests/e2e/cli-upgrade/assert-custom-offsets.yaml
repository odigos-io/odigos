apiVersion: v1
kind: ConfigMap
metadata:
  name: odigos-go-offsets
  namespace: odigos-test
---
apiVersion: v1
kind: Pod
metadata:
  labels:
    app.kubernetes.io/name: odiglet
  namespace: odigos-test
  ownerReferences:
    - apiVersion: apps/v1
      blockOwnerDeletion: true
      controller: true
      kind: DaemonSet
      name: odiglet
spec:
  containers:
    - name: odiglet
      resources: {}
      securityContext:
        capabilities:
          add:
            - SYS_PTRACE
        privileged: true
      image: registry.odigos.io/odigos-odiglet:e2e-test
      env:
        - name: OTEL_GO_OFFSETS_FILE
          value: /offsets/offset_results.json
      volumeMounts:
        - mountPath: /offsets
          name: odigos-go-offsets
  volumes:
    - configMap:
        defaultMode: 420
        name: odigos-go-offsets
status:
  containerStatuses:
    - name: odiglet
      ready: true
      restartCount: 0
      started: true
