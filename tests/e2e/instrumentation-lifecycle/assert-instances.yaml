# Instrumentation Instance Assertions
# Verifies that instrumentation instances are created for the 4 test workloads

apiVersion: odigos.io/v1alpha1
kind: InstrumentationInstance
metadata:
  namespace: default
  labels:
    instrumented-app: deployment-nodejs-minimum-version
status:
  healthy: true
  identifyingAttributes:
    - key: service.instance.id
      (value != null): true
    - key: telemetry.sdk.language
      value: nodejs
    - key: process.runtime.version
      (value != null): true
    - key: telemetry.distro.version
      (value != null): true
    - key: process.vpid
      (value != null): true
    - key: k8s.namespace.name
      (value != null): true
    - key: k8s.container.name
      (value != null): true
    - key: k8s.pod.name
      (value != null): true
---
apiVersion: odigos.io/v1alpha1
kind: InstrumentationInstance
metadata:
  namespace: default
  labels:
    instrumented-app: deployment-nodejs-latest-version
status:
  healthy: true
  identifyingAttributes:
    - key: service.instance.id
      (value != null): true
    - key: telemetry.sdk.language
      value: nodejs
    - key: process.runtime.version
      (value != null): true
    - key: telemetry.distro.version
      (value != null): true
    - key: process.vpid
      (value != null): true
    - key: k8s.namespace.name
      (value != null): true
    - key: k8s.container.name
      (value != null): true
    - key: k8s.pod.name
      (value != null): true
---
apiVersion: odigos.io/v1alpha1
kind: InstrumentationInstance
metadata:
  namespace: default
  labels:
    instrumented-app: deployment-python-latest-version
status:
  healthy: true
  identifyingAttributes:
    - key: service.instance.id
      (value != null): true
    - key: process.vpid
      (value != null): true
    - key: telemetry.sdk.language
      value: python
    - key: k8s.namespace.name
      (value != null): true
    - key: k8s.container.name
      (value != null): true
    - key: k8s.pod.name
      (value != null): true
